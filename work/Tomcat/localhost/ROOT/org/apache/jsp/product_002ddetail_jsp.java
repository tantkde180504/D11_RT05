/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/10.1.20
 * Generated at: 2025-06-24 02:24:33 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import jakarta.servlet.*;
import jakarta.servlet.http.*;
import jakarta.servlet.jsp.*;

public final class product_002ddetail_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports,
                 org.apache.jasper.runtime.JspSourceDirectives {

  private static final jakarta.servlet.jsp.JspFactory _jspxFactory =
          jakarta.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.LinkedHashSet<>(3);
    _jspx_imports_packages.add("jakarta.servlet");
    _jspx_imports_packages.add("jakarta.servlet.http");
    _jspx_imports_packages.add("jakarta.servlet.jsp");
    _jspx_imports_classes = null;
  }

  private volatile jakarta.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public boolean getErrorOnELNotFound() {
    return false;
  }

  public jakarta.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
  }

  public void _jspDestroy() {
  }

  public void _jspService(final jakarta.servlet.http.HttpServletRequest request, final jakarta.servlet.http.HttpServletResponse response)
      throws java.io.IOException, jakarta.servlet.ServletException {

    if (!jakarta.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      final java.lang.String _jspx_method = request.getMethod();
      if ("OPTIONS".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        return;
      }
      if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET, POST or HEAD. Jasper also permits OPTIONS");
        return;
      }
    }

    final jakarta.servlet.jsp.PageContext pageContext;
    jakarta.servlet.http.HttpSession session = null;
    final jakarta.servlet.ServletContext application;
    final jakarta.servlet.ServletConfig config;
    jakarta.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    jakarta.servlet.jsp.JspWriter _jspx_out = null;
    jakarta.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("<!DOCTYPE html>\r\n");
      out.write("<html lang=\"vi\">\r\n");
      out.write("<head>\r\n");
      out.write("    <meta charset=\"UTF-8\">\r\n");
      out.write("    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n");
      out.write("    <title>Chi tiết sản phẩm - 43 Gundam Hobby</title>\r\n");
      out.write("    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n");
      out.write("    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\" rel=\"stylesheet\">\r\n");
      out.write("    <link href=\"");
      out.print(request.getContextPath());
      out.write("/css/styles.css\" rel=\"stylesheet\">\r\n");
      out.write("    <link href=\"");
      out.print(request.getContextPath());
      out.write("/css/category-popup.css\" rel=\"stylesheet\">\r\n");
      out.write("    <link href=\"");
      out.print(request.getContextPath());
      out.write("/css/navbar-darkmode.css\" rel=\"stylesheet\">\r\n");
      out.write("    <link href=\"");
      out.print(request.getContextPath());
      out.write("/css/navbar-bg-orange.css\" rel=\"stylesheet\">\r\n");
      out.write("    <link href=\"");
      out.print(request.getContextPath());
      out.write("/css/navbar-menu-white.css\" rel=\"stylesheet\">\r\n");
      out.write("    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\r\n");
      out.write("    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\r\n");
      out.write("    <link href=\"https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap\" rel=\"stylesheet\">    <style>\r\n");
      out.write("        /* Base styles */\r\n");
      out.write("        :root {\r\n");
      out.write("            --primary-color: #E55A00;\r\n");
      out.write("            --primary-hover: #cc4f00;\r\n");
      out.write("            --text-dark: #333;\r\n");
      out.write("            --text-muted: #666;\r\n");
      out.write("            --border-color: #e9ecef;\r\n");
      out.write("            --shadow-sm: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);\r\n");
      out.write("            --shadow-md: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);\r\n");
      out.write("            --transition: all 0.3s ease;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        body {\r\n");
      out.write("            font-family: 'Roboto', sans-serif;\r\n");
      out.write("            color: var(--text-dark);\r\n");
      out.write("            line-height: 1.6;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Product Detail Layout */\r\n");
      out.write("        .product-detail-section {\r\n");
      out.write("            background: #fff;\r\n");
      out.write("            border-radius: 12px;\r\n");
      out.write("            box-shadow: var(--shadow-sm);\r\n");
      out.write("            overflow: hidden;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Product Title */\r\n");
      out.write("        .product-title {\r\n");
      out.write("            font-size: 1.875rem;\r\n");
      out.write("            font-weight: 700;\r\n");
      out.write("            color: var(--text-dark);\r\n");
      out.write("            line-height: 1.3;\r\n");
      out.write("            margin-bottom: 1rem;\r\n");
      out.write("            border-bottom: 2px solid var(--primary-color);\r\n");
      out.write("            padding-bottom: 0.75rem;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Product Price Section */\r\n");
      out.write("        .price-section {\r\n");
      out.write("            background: linear-gradient(135deg, #fff5f0 0%, #fff 100%);\r\n");
      out.write("            border: 2px solid var(--primary-color);\r\n");
      out.write("            border-radius: 12px;\r\n");
      out.write("            padding: 1.5rem;\r\n");
      out.write("            margin-bottom: 1.5rem;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .product-price {\r\n");
      out.write("            font-size: 2rem;\r\n");
      out.write("            font-weight: 800;\r\n");
      out.write("            color: var(--primary-color);\r\n");
      out.write("            margin: 0;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .old-price {\r\n");
      out.write("            font-size: 1.25rem;\r\n");
      out.write("            text-decoration: line-through;\r\n");
      out.write("            color: #999;\r\n");
      out.write("            margin-left: 0.75rem;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .discount-badge {\r\n");
      out.write("            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));\r\n");
      out.write("            color: white;\r\n");
      out.write("            font-size: 0.875rem;\r\n");
      out.write("            font-weight: 600;\r\n");
      out.write("            padding: 0.375rem 0.75rem;\r\n");
      out.write("            border-radius: 20px;\r\n");
      out.write("            margin-left: 0.75rem;\r\n");
      out.write("            box-shadow: var(--shadow-sm);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Product Gallery */\r\n");
      out.write("        .product-gallery {\r\n");
      out.write("            position: relative;\r\n");
      out.write("            background: #fff;\r\n");
      out.write("            border-radius: 12px;\r\n");
      out.write("            overflow: hidden;\r\n");
      out.write("            box-shadow: var(--shadow-md);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .product-gallery .main-image {\r\n");
      out.write("            width: 100%;\r\n");
      out.write("            height: 400px;\r\n");
      out.write("            object-fit: cover;\r\n");
      out.write("            border-radius: 12px;\r\n");
      out.write("            transition: var(--transition);\r\n");
      out.write("            cursor: zoom-in;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .product-gallery .main-image:hover {\r\n");
      out.write("            transform: scale(1.02);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .thumbnail-container {\r\n");
      out.write("            display: flex;\r\n");
      out.write("            gap: 0.75rem;\r\n");
      out.write("            margin-top: 1rem;\r\n");
      out.write("            justify-content: flex-start;\r\n");
      out.write("            flex-wrap: wrap;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .thumbnail-image {\r\n");
      out.write("            width: 80px;\r\n");
      out.write("            height: 80px;\r\n");
      out.write("            object-fit: cover;\r\n");
      out.write("            border-radius: 8px;\r\n");
      out.write("            border: 3px solid transparent;\r\n");
      out.write("            cursor: pointer;\r\n");
      out.write("            transition: var(--transition);\r\n");
      out.write("            box-shadow: var(--shadow-sm);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .thumbnail-image:hover,\r\n");
      out.write("        .thumbnail-image.active {\r\n");
      out.write("            border-color: var(--primary-color);\r\n");
      out.write("            transform: translateY(-2px);\r\n");
      out.write("            box-shadow: var(--shadow-md);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Product Info Cards */\r\n");
      out.write("        .info-card {\r\n");
      out.write("            background: #fff;\r\n");
      out.write("            border: 1px solid var(--border-color);\r\n");
      out.write("            border-radius: 12px;\r\n");
      out.write("            padding: 1.5rem;\r\n");
      out.write("            margin-bottom: 1.5rem;\r\n");
      out.write("            box-shadow: var(--shadow-sm);\r\n");
      out.write("            transition: var(--transition);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .info-card:hover {\r\n");
      out.write("            box-shadow: var(--shadow-md);\r\n");
      out.write("            transform: translateY(-2px);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .info-card h5 {\r\n");
      out.write("            color: var(--text-dark);\r\n");
      out.write("            font-weight: 600;\r\n");
      out.write("            margin-bottom: 1rem;\r\n");
      out.write("            padding-bottom: 0.5rem;\r\n");
      out.write("            border-bottom: 2px solid var(--primary-color);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Product Info Table */\r\n");
      out.write("        .product-info-table {\r\n");
      out.write("            margin: 0;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .product-info-table td {\r\n");
      out.write("            padding: 0.75rem 1rem;\r\n");
      out.write("            border: none;\r\n");
      out.write("            border-bottom: 1px solid #f8f9fa;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .product-info-table td:first-child {\r\n");
      out.write("            font-weight: 600;\r\n");
      out.write("            color: var(--text-muted);\r\n");
      out.write("            width: 140px;\r\n");
      out.write("            background: #f8f9fa;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .product-info-table td:last-child {\r\n");
      out.write("            color: var(--text-dark);\r\n");
      out.write("            font-weight: 500;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .product-info-table tr:last-child td {\r\n");
      out.write("            border-bottom: none;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Badges */\r\n");
      out.write("        .badge {\r\n");
      out.write("            font-size: 0.875rem;\r\n");
      out.write("            padding: 0.5rem 1rem;\r\n");
      out.write("            border-radius: 20px;\r\n");
      out.write("            font-weight: 500;\r\n");
      out.write("            margin-right: 0.5rem;\r\n");
      out.write("            margin-bottom: 0.5rem;\r\n");
      out.write("            display: inline-block;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .badge.bg-success {\r\n");
      out.write("            background: linear-gradient(135deg, #28a745, #20c997) !important;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .badge.bg-warning {\r\n");
      out.write("            background: linear-gradient(135deg, #ffc107, #fd7e14) !important;\r\n");
      out.write("            color: #000 !important;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .badge.bg-primary {\r\n");
      out.write("            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover)) !important;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Buttons */\r\n");
      out.write("        .btn-buy {\r\n");
      out.write("            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));\r\n");
      out.write("            border: none;\r\n");
      out.write("            color: white;\r\n");
      out.write("            font-weight: 600;\r\n");
      out.write("            font-size: 1.125rem;\r\n");
      out.write("            padding: 1rem 2rem;\r\n");
      out.write("            border-radius: 50px;\r\n");
      out.write("            letter-spacing: 0.5px;\r\n");
      out.write("            transition: var(--transition);\r\n");
      out.write("            box-shadow: var(--shadow-md);\r\n");
      out.write("            width: 100%;\r\n");
      out.write("            margin-bottom: 1rem;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .btn-buy:hover:not(:disabled) {\r\n");
      out.write("            transform: translateY(-3px);\r\n");
      out.write("            box-shadow: 0 0.75rem 1.5rem rgba(229, 90, 0, 0.3);\r\n");
      out.write("            color: white;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .btn-buy:disabled {\r\n");
      out.write("            background: #6c757d;\r\n");
      out.write("            cursor: not-allowed;\r\n");
      out.write("            transform: none;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Tabs */\r\n");
      out.write("        .nav-tabs {\r\n");
      out.write("            border-bottom: 2px solid var(--border-color);\r\n");
      out.write("            margin-bottom: 0;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .nav-tabs .nav-link {\r\n");
      out.write("            color: var(--text-muted);\r\n");
      out.write("            font-weight: 600;\r\n");
      out.write("            padding: 1rem 1.5rem;\r\n");
      out.write("            border: none;\r\n");
      out.write("            border-radius: 12px 12px 0 0;\r\n");
      out.write("            margin-right: 0.25rem;\r\n");
      out.write("            transition: var(--transition);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .nav-tabs .nav-link:hover {\r\n");
      out.write("            color: var(--primary-color);\r\n");
      out.write("            background: #f8f9fa;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .nav-tabs .nav-link.active {\r\n");
      out.write("            color: var(--primary-color);\r\n");
      out.write("            background: #fff;\r\n");
      out.write("            border-bottom: 3px solid var(--primary-color);\r\n");
      out.write("            font-weight: 700;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .tab-content {\r\n");
      out.write("            background: #fff;\r\n");
      out.write("            border-radius: 0 12px 12px 12px;\r\n");
      out.write("            padding: 2rem;\r\n");
      out.write("            box-shadow: var(--shadow-sm);\r\n");
      out.write("            min-height: 300px;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Loading States */\r\n");
      out.write("        #product-loading {\r\n");
      out.write("            background: linear-gradient(135deg, #f8f9fa 0%, #fff 100%);\r\n");
      out.write("            border: 2px dashed var(--border-color);\r\n");
      out.write("            border-radius: 12px;\r\n");
      out.write("            margin: 2rem 0;\r\n");
      out.write("            padding: 3rem;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .spinner-border-primary {\r\n");
      out.write("            color: var(--primary-color);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Related Products */\r\n");
      out.write("        .related-product-item {\r\n");
      out.write("            display: flex;\r\n");
      out.write("            align-items: center;\r\n");
      out.write("            padding: 1rem;\r\n");
      out.write("            margin-bottom: 1rem;\r\n");
      out.write("            background: #f8f9fa;\r\n");
      out.write("            border-radius: 12px;\r\n");
      out.write("            transition: var(--transition);\r\n");
      out.write("            text-decoration: none;\r\n");
      out.write("            color: inherit;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .related-product-item:hover {\r\n");
      out.write("            background: #e9ecef;\r\n");
      out.write("            transform: translateX(5px);\r\n");
      out.write("            color: inherit;\r\n");
      out.write("            text-decoration: none;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .related-product-img {\r\n");
      out.write("            width: 60px;\r\n");
      out.write("            height: 60px;\r\n");
      out.write("            object-fit: cover;\r\n");
      out.write("            border-radius: 8px;\r\n");
      out.write("            margin-right: 1rem;\r\n");
      out.write("            box-shadow: var(--shadow-sm);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .related-product-info h6 {\r\n");
      out.write("            font-size: 0.9rem;\r\n");
      out.write("            font-weight: 600;\r\n");
      out.write("            margin: 0 0 0.25rem 0;\r\n");
      out.write("            color: var(--text-dark);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .related-product-price {\r\n");
      out.write("            color: var(--primary-color);\r\n");
      out.write("            font-weight: 700;\r\n");
      out.write("            font-size: 1rem;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Policy Section */\r\n");
      out.write("        .policy-list li {\r\n");
      out.write("            display: flex;\r\n");
      out.write("            align-items: center;\r\n");
      out.write("            padding: 0.75rem 0;\r\n");
      out.write("            border-bottom: 1px solid #f1f3f4;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .policy-list li:last-child {\r\n");
      out.write("            border-bottom: none;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .policy-list i {\r\n");
      out.write("            width: 24px;\r\n");
      out.write("            margin-right: 0.75rem;\r\n");
      out.write("            font-size: 1.125rem;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Breadcrumb */\r\n");
      out.write("        .breadcrumb {\r\n");
      out.write("            background: linear-gradient(135deg, #f8f9fa 0%, #fff 100%);\r\n");
      out.write("            border-radius: 8px;\r\n");
      out.write("            padding: 1rem 1.5rem;\r\n");
      out.write("            margin-bottom: 1.5rem;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .breadcrumb-item a {\r\n");
      out.write("            color: var(--text-muted);\r\n");
      out.write("            text-decoration: none;\r\n");
      out.write("            transition: var(--transition);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .breadcrumb-item a:hover {\r\n");
      out.write("            color: var(--primary-color);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .breadcrumb-item.active {\r\n");
      out.write("            color: var(--text-dark);\r\n");
      out.write("            font-weight: 600;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Review Form */\r\n");
      out.write("        .review-form {\r\n");
      out.write("            background: #f8f9fa;\r\n");
      out.write("            border-radius: 12px;\r\n");
      out.write("            padding: 1.5rem;\r\n");
      out.write("            margin-top: 1.5rem;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .review-form .form-label {\r\n");
      out.write("            font-weight: 600;\r\n");
      out.write("            color: var(--text-dark);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .review-form .form-control,\r\n");
      out.write("        .review-form .form-select {\r\n");
      out.write("            border-radius: 8px;\r\n");
      out.write("            border: 2px solid var(--border-color);\r\n");
      out.write("            transition: var(--transition);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .review-form .form-control:focus,\r\n");
      out.write("        .review-form .form-select:focus {\r\n");
      out.write("            border-color: var(--primary-color);\r\n");
      out.write("            box-shadow: 0 0 0 0.2rem rgba(229, 90, 0, 0.25);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Responsive Design */\r\n");
      out.write("        @media (max-width: 768px) {\r\n");
      out.write("            .product-title {\r\n");
      out.write("                font-size: 1.5rem;\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            .product-price {\r\n");
      out.write("                font-size: 1.75rem;\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            .price-section {\r\n");
      out.write("                padding: 1rem;\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            .btn-buy {\r\n");
      out.write("                font-size: 1rem;\r\n");
      out.write("                padding: 0.875rem 1.5rem;\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            .product-gallery .main-image {\r\n");
      out.write("                height: 300px;\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            .thumbnail-image {\r\n");
      out.write("                width: 60px;\r\n");
      out.write("                height: 60px;\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            .tab-content {\r\n");
      out.write("                padding: 1.5rem;\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        @media (max-width: 576px) {\r\n");
      out.write("            .product-title {\r\n");
      out.write("                font-size: 1.375rem;\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            .product-price {\r\n");
      out.write("                font-size: 1.5rem;\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            .thumbnail-container {\r\n");
      out.write("                justify-content: center;\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            .old-price,\r\n");
      out.write("            .discount-badge {\r\n");
      out.write("                display: block;\r\n");
      out.write("                margin-left: 0;\r\n");
      out.write("                margin-top: 0.5rem;\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Animation */\r\n");
      out.write("        @keyframes fadeIn {\r\n");
      out.write("            from { opacity: 0; transform: translateY(20px); }\r\n");
      out.write("            to { opacity: 1; transform: translateY(0); }\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .animate-fade-in {\r\n");
      out.write("            animation: fadeIn 0.6s ease-out;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        /* Back to top button */\r\n");
      out.write("        .back-to-top {\r\n");
      out.write("            position: fixed;\r\n");
      out.write("            bottom: 30px;\r\n");
      out.write("            right: 30px;\r\n");
      out.write("            background: var(--primary-color);\r\n");
      out.write("            color: white;\r\n");
      out.write("            border: none;\r\n");
      out.write("            border-radius: 50%;\r\n");
      out.write("            width: 50px;\r\n");
      out.write("            height: 50px;\r\n");
      out.write("            font-size: 1.25rem;\r\n");
      out.write("            cursor: pointer;\r\n");
      out.write("            transition: var(--transition);\r\n");
      out.write("            opacity: 0;\r\n");
      out.write("            visibility: hidden;\r\n");
      out.write("            z-index: 1000;\r\n");
      out.write("            box-shadow: var(--shadow-md);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .back-to-top.show {\r\n");
      out.write("            opacity: 1;\r\n");
      out.write("            visibility: visible;\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        .back-to-top:hover {\r\n");
      out.write("            background: var(--primary-hover);\r\n");
      out.write("            transform: translateY(-3px);\r\n");
      out.write("            box-shadow: 0 0.75rem 1.5rem rgba(229, 90, 0, 0.3);\r\n");
      out.write("        }\r\n");
      out.write("    </style>\r\n");
      out.write("</head>\r\n");
      out.write("<body>\r\n");
      out.write("    <!-- Header -->\r\n");
      out.write("    <header class=\"bg-white shadow-sm sticky-top\">\r\n");
      out.write("        <div class=\"container\">\r\n");
      out.write("            <div class=\"row align-items-center py-3\">\r\n");
      out.write("                <div class=\"col-lg-2 col-md-3\">\r\n");
      out.write("                    <div class=\"logo\">\r\n");
      out.write("                        <a href=\"");
      out.print(request.getContextPath());
      out.write("/\">\r\n");
      out.write("                            <img src=\"");
      out.print(request.getContextPath());
      out.write("/img/logo.png\" alt=\"43 Gundam Logo\" class=\"logo-img\">\r\n");
      out.write("                        </a>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"col-lg-6 col-md-5\">\r\n");
      out.write("                    <div class=\"search-container\">\r\n");
      out.write("                        <form class=\"search-form\">\r\n");
      out.write("                            <div class=\"input-group\">\r\n");
      out.write("                                <input type=\"text\" class=\"form-control search-input\" placeholder=\"Tìm kiếm sản phẩm...\">\r\n");
      out.write("                                <button class=\"btn btn-search\" type=\"submit\">\r\n");
      out.write("                                    <i class=\"fas fa-search\"></i>\r\n");
      out.write("                                </button>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </form>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"col-lg-4 col-md-4\">\r\n");
      out.write("                    <div class=\"header-actions d-flex justify-content-end align-items-center\">\r\n");
      out.write("                        <div class=\"account-menu me-3\">\r\n");
      out.write("                            <div class=\"dropdown\">\r\n");
      out.write("                                <a href=\"#\" class=\"btn btn-outline-primary dropdown-toggle\" \r\n");
      out.write("                                   id=\"accountDropdown\" role=\"button\" data-bs-toggle=\"dropdown\">\r\n");
      out.write("                                    <i class=\"fas fa-user me-1\"></i>\r\n");
      out.write("                                    <span>Tài khoản</span>\r\n");
      out.write("                                </a>\r\n");
      out.write("                                <ul class=\"dropdown-menu dropdown-menu-end\">\r\n");
      out.write("                                    <li id=\"guestLoginOption\"><a class=\"dropdown-item\" href=\"");
      out.print(request.getContextPath());
      out.write("/login.jsp\">\r\n");
      out.write("                                        <i class=\"fas fa-sign-in-alt me-2\"></i>Đăng nhập\r\n");
      out.write("                                    </a></li>\r\n");
      out.write("                                    <li id=\"userMenu\" style=\"display:none;\">\r\n");
      out.write("                                        <span class=\"dropdown-item disabled\"><i class=\"fas fa-user me-2\"></i>Xin chào, <span id=\"userName\">User</span></span>\r\n");
      out.write("                                    </li>\r\n");
      out.write("                                    <li id=\"userAccountOption\" style=\"display:none;\"><a class=\"dropdown-item\" href=\"");
      out.print(request.getContextPath());
      out.write("/profile.jsp\">\r\n");
      out.write("                                        <i class=\"fas fa-id-card me-2\"></i>Thông tin tài khoản\r\n");
      out.write("                                    </a></li>\r\n");
      out.write("                                    <li id=\"userOrdersOption\" style=\"display:none;\"><a class=\"dropdown-item\" href=\"");
      out.print(request.getContextPath());
      out.write("/profile.jsp\" onclick=\"document.getElementById('profileOrdersTab').click();return false;\">\r\n");
      out.write("                                        <i class=\"fas fa-box me-2\"></i>Đơn hàng của bạn\r\n");
      out.write("                                    </a></li>\r\n");
      out.write("                                    <li id=\"userDivider\" style=\"display:none;\"><hr class=\"dropdown-divider\"></li>\r\n");
      out.write("                                    <li id=\"userLogoutOption\" style=\"display:none;\"><a class=\"dropdown-item text-danger\" href=\"#\" onclick=\"userLogout()\">\r\n");
      out.write("                                        <i class=\"fas fa-sign-out-alt me-2\"></i>Đăng xuất\r\n");
      out.write("                                    </a></li>\r\n");
      out.write("                                    <li><a class=\"dropdown-item\" href=\"");
      out.print(request.getContextPath());
      out.write("/register.jsp\">\r\n");
      out.write("                                        <i class=\"fas fa-user-plus me-2\"></i>Đăng ký\r\n");
      out.write("                                    </a></li>\r\n");
      out.write("                                </ul>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"cart-btn\">\r\n");
      out.write("                            <a href=\"#\" class=\"btn btn-primary\">\r\n");
      out.write("                                <i class=\"fas fa-shopping-cart me-1\"></i>\r\n");
      out.write("                                <span class=\"cart-count\">0</span>\r\n");
      out.write("                                <span class=\"d-none d-lg-inline ms-1\">Giỏ hàng</span>\r\n");
      out.write("                            </a>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("    </header>\r\n");
      out.write("    <!-- Navigation Bar -->\r\n");
      out.write("    <nav class=\"navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top py-0 position-relative\">\r\n");
      out.write("        <div class=\"container position-relative\">\r\n");
      out.write("            <!-- Nút danh mục sản phẩm -->\r\n");
      out.write("            <div class=\"d-none d-lg-block position-relative\">\r\n");
      out.write("                <button class=\"btn btn-outline-primary fw-bold px-4 py-2 me-3\" id=\"categoryBtn\" type=\"button\">\r\n");
      out.write("                    <i class=\"fas fa-bars me-2\"></i> DANH MỤC SẢN PHẨM\r\n");
      out.write("                </button>\r\n");
      out.write("                <div class=\"category-popup shadow\" id=\"categoryPopup\">\r\n");
      out.write("                    <div class=\"category-item\">Gundam Bandai</div>\r\n");
      out.write("                    <div class=\"category-item\">Mô hình Trung</div>\r\n");
      out.write("                    <div class=\"category-item\">Metal Build - Diecast</div>\r\n");
      out.write("                    <div class=\"category-item\">Dụng cụ - Tool</div>\r\n");
      out.write("                    <div class=\"category-item\">Phụ kiện - Base</div>\r\n");
      out.write("                    <div class=\"category-item\">Mô hình Dragon Ball</div>\r\n");
      out.write("                    <div class=\"category-item\">Sơn - Decal</div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("            <!-- Menu -->\r\n");
      out.write("            <div class=\"collapse navbar-collapse\" id=\"mainNavbar\">\r\n");
      out.write("                <ul class=\"navbar-nav mx-auto mb-2 mb-lg-0\">\r\n");
      out.write("                    <li class=\"nav-item\">\r\n");
      out.write("                        <a class=\"nav-link fw-bold\" href=\"");
      out.print(request.getContextPath());
      out.write("/all-products.jsp\">Tất cả sản phẩm</a>\r\n");
      out.write("                    </li>\r\n");
      out.write("                    <li class=\"nav-item\">\r\n");
      out.write("                        <a class=\"nav-link fw-bold\" href=\"#\">HÀNG MỚI VỀ</a>\r\n");
      out.write("                    </li>\r\n");
      out.write("                    <li class=\"nav-item\">\r\n");
      out.write("                        <a class=\"nav-link fw-bold\" href=\"#\">HÀNG PRE-ORDER</a>\r\n");
      out.write("                    </li>\r\n");
      out.write("                    <li class=\"nav-item dropdown\">\r\n");
      out.write("                        <a class=\"nav-link dropdown-toggle fw-bold\" href=\"#\" id=\"phukienDropdown\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n");
      out.write("                            PHỤ KIỆN & MÔ HÌNH\r\n");
      out.write("                        </a>\r\n");
      out.write("                        <ul class=\"dropdown-menu\" aria-labelledby=\"phukienDropdown\">\r\n");
      out.write("                            <li><a class=\"dropdown-item\" href=\"#\">Dụng cụ - Tool</a></li>\r\n");
      out.write("                            <li><a class=\"dropdown-item\" href=\"#\">Phụ kiện - Base</a></li>\r\n");
      out.write("                            <li><a class=\"dropdown-item\" href=\"#\">Mô hình Dragon Ball</a></li>\r\n");
      out.write("                        </ul>\r\n");
      out.write("                    </li>\r\n");
      out.write("                    <li class=\"nav-item dropdown\">\r\n");
      out.write("                        <a class=\"nav-link dropdown-toggle fw-bold\" href=\"#\" id=\"bandaiDropdown\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n");
      out.write("                            BANDAI\r\n");
      out.write("                        </a>\r\n");
      out.write("                        <ul class=\"dropdown-menu\" aria-labelledby=\"bandaiDropdown\">\r\n");
      out.write("                            <li><a class=\"dropdown-item\" href=\"#\">High Grade (HG)</a></li>\r\n");
      out.write("                            <li><a class=\"dropdown-item\" href=\"#\">Master Grade (MG)</a></li>\r\n");
      out.write("                            <li><a class=\"dropdown-item\" href=\"#\">Real Grade (RG)</a></li>\r\n");
      out.write("                            <li><a class=\"dropdown-item\" href=\"#\">Perfect Grade (PG)</a></li>\r\n");
      out.write("                        </ul>\r\n");
      out.write("                    </li>\r\n");
      out.write("                </ul>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("    </nav>\r\n");
      out.write("    <!-- Hero Banner -->\r\n");
      out.write("    <section class=\"hero-banner py-4\">\r\n");
      out.write("        <div class=\"container\">\r\n");
      out.write("            <div class=\"row\">\r\n");
      out.write("                <div class=\"col-lg-9\">\r\n");
      out.write("                    <div id=\"heroCarousel\" class=\"carousel slide hero-carousel\" data-bs-ride=\"carousel\">\r\n");
      out.write("                        <div class=\"carousel-indicators\">\r\n");
      out.write("                            <button type=\"button\" data-bs-target=\"#heroCarousel\" data-bs-slide-to=\"0\" class=\"active\"></button>\r\n");
      out.write("                            <button type=\"button\" data-bs-target=\"#heroCarousel\" data-bs-slide-to=\"1\"></button>\r\n");
      out.write("                            <button type=\"button\" data-bs-target=\"#heroCarousel\" data-bs-slide-to=\"2\"></button>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"carousel-inner\">\r\n");
      out.write("                            <div class=\"carousel-item active\">\r\n");
      out.write("                                <img src=\"");
      out.print(request.getContextPath());
      out.write("/img/Banner1.jpg\" class=\"d-block w-100\" alt=\"Banner 1\" \r\n");
      out.write("                                     onerror=\"this.src='https://via.placeholder.com/800x400/ff6600/ffffff?text=GUNPLA+45th+Anniversary'\">\r\n");
      out.write("                                <div class=\"carousel-caption\">\r\n");
      out.write("                                    <h3 class=\"banner-title\">GUNPLA 45th Anniversary</h3>\r\n");
      out.write("                                    <p class=\"banner-subtitle\">Perfect Grade Unleashed Nu Gundam</p>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <div class=\"carousel-item\">\r\n");
      out.write("                                <img src=\"");
      out.print(request.getContextPath());
      out.write("/img/Banner2.jpg\" class=\"d-block w-100\" alt=\"Banner 2\"\r\n");
      out.write("                                     onerror=\"this.src='https://via.placeholder.com/800x400/0066cc/ffffff?text=Gundam+Base+Tour'\">\r\n");
      out.write("                                <div class=\"carousel-caption\">\r\n");
      out.write("                                    <h3 class=\"banner-title\">The Gundam Base World Tour 2025</h3>\r\n");
      out.write("                                    <p class=\"banner-subtitle\">Khám phá bộ sưu tập mới nhất từ Bandai</p>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <div class=\"carousel-item\">\r\n");
      out.write("                                <img src=\"");
      out.print(request.getContextPath());
      out.write("/img/sale.png\" class=\"d-block w-100\" alt=\"Banner 3\"\r\n");
      out.write("                                     onerror=\"this.src='https://via.placeholder.com/800x400/cc0066/ffffff?text=Special+Sale'\">\r\n");
      out.write("                                <div class=\"carousel-caption\">\r\n");
      out.write("                                    <h3 class=\"banner-title\">Special Sale Event</h3>\r\n");
      out.write("                                    <p class=\"banner-subtitle\">Giảm giá lên đến 50% cho các sản phẩm chọn lọc</p>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <button class=\"carousel-control-prev\" type=\"button\" data-bs-target=\"#heroCarousel\" data-bs-slide=\"prev\">\r\n");
      out.write("                            <span class=\"carousel-control-prev-icon\"></span>\r\n");
      out.write("                        </button>\r\n");
      out.write("                        <button class=\"carousel-control-next\" type=\"button\" data-bs-target=\"#heroCarousel\" data-bs-slide=\"next\">\r\n");
      out.write("                            <span class=\"carousel-control-next-icon\"></span>\r\n");
      out.write("                        </button>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"col-lg-3\">\r\n");
      out.write("                    <div class=\"side-banners\">\r\n");
      out.write("                        <div class=\"side-banner mb-3\">\r\n");
      out.write("                            <img src=\"");
      out.print(request.getContextPath());
      out.write("/img/sale.png\" class=\"img-fluid rounded\" alt=\"Sale Banner\">\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"side-banner\">\r\n");
      out.write("                            <img src=\"");
      out.print(request.getContextPath());
      out.write("/img/New.jpg\" class=\"img-fluid rounded\" alt=\"New Arrivals\">\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("    </section>    <!-- Main Content: Chi tiết sản phẩm -->\r\n");
      out.write("    <main class=\"product-detail-container\">\r\n");
      out.write("        <!-- Breadcrumb Navigation -->\r\n");
      out.write("        <div class=\"breadcrumb-nav\" id=\"breadcrumb-nav\" style=\"display: none;\">\r\n");
      out.write("            <div class=\"container\">\r\n");
      out.write("                <nav aria-label=\"breadcrumb\">\r\n");
      out.write("                    <ol class=\"breadcrumb\">\r\n");
      out.write("                        <li class=\"breadcrumb-item\"><a href=\"");
      out.print(request.getContextPath());
      out.write("/\">Trang chủ</a></li>\r\n");
      out.write("                        <li class=\"breadcrumb-item\"><a href=\"");
      out.print(request.getContextPath());
      out.write("/all-products.jsp\">Tất cả sản phẩm</a></li>\r\n");
      out.write("                        <li class=\"breadcrumb-item active\" id=\"breadcrumb-product-name\" aria-current=\"page\">Chi tiết sản phẩm</li>\r\n");
      out.write("                    </ol>\r\n");
      out.write("                </nav>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("\r\n");
      out.write("        <!-- Loading State -->\r\n");
      out.write("        <div class=\"container\">\r\n");
      out.write("            <div class=\"text-center py-5\" id=\"product-loading\">\r\n");
      out.write("                <div class=\"loading-skeleton image mx-auto mb-4\" style=\"width: 300px;\"></div>\r\n");
      out.write("                <div class=\"loading-skeleton title mx-auto mb-3\" style=\"width: 400px;\"></div>\r\n");
      out.write("                <div class=\"loading-skeleton text mx-auto mb-2\" style=\"width: 250px;\"></div>\r\n");
      out.write("                <div class=\"loading-skeleton text mx-auto mb-4\" style=\"width: 200px;\"></div>\r\n");
      out.write("                <p class=\"text-muted\">Đang tải thông tin sản phẩm từ database...</p>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("            <!-- Product Detail Content -->\r\n");
      out.write("            <div class=\"row g-4\" id=\"product-content\" style=\"display: none;\">\r\n");
      out.write("                <!-- Product Gallery -->\r\n");
      out.write("                <div class=\"col-lg-6\">\r\n");
      out.write("                    <div class=\"product-gallery\">\r\n");
      out.write("                        <div class=\"main-image-container\">\r\n");
      out.write("                            <img id=\"main-product-image\" \r\n");
      out.write("                                 src=\"");
      out.print(request.getContextPath());
      out.write("/img/default-gundam.jpg\" \r\n");
      out.write("                                 alt=\"Product Image\" \r\n");
      out.write("                                 class=\"main-product-image image-zoom\">\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"gallery-thumbnails\" id=\"thumbnail-container\">\r\n");
      out.write("                            <!-- Thumbnails will be loaded dynamically -->\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("\r\n");
      out.write("                <!-- Product Information -->\r\n");
      out.write("                <div class=\"col-lg-6\">\r\n");
      out.write("                    <div class=\"product-info\">\r\n");
      out.write("                        <!-- Product Title -->\r\n");
      out.write("                        <h1 class=\"product-title\" id=\"product-title\">Đang tải tên sản phẩm...</h1>\r\n");
      out.write("                        \r\n");
      out.write("                        <!-- Product Meta Information -->\r\n");
      out.write("                        <div class=\"product-meta\" id=\"product-meta\">\r\n");
      out.write("                            <!-- Grade, Brand, Stock status badges will be added here -->\r\n");
      out.write("                        </div>\r\n");
      out.write("\r\n");
      out.write("                        <!-- Price Section -->\r\n");
      out.write("                        <div class=\"product-price-section\" id=\"price-section\">\r\n");
      out.write("                            <div class=\"d-flex align-items-center flex-wrap\">\r\n");
      out.write("                                <span class=\"current-price\" id=\"current-price\">Đang tải giá...</span>\r\n");
      out.write("                                <span class=\"old-price\" id=\"old-price\" style=\"display: none;\"></span>\r\n");
      out.write("                                <span class=\"discount-percentage\" id=\"discount-badge\" style=\"display: none;\"></span>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("\r\n");
      out.write("                        <!-- Product Description -->\r\n");
      out.write("                        <div class=\"product-description\" id=\"product-description\">\r\n");
      out.write("                            Đang tải mô tả sản phẩm...\r\n");
      out.write("                        </div>\r\n");
      out.write("\r\n");
      out.write("                        <!-- Quantity Selector -->\r\n");
      out.write("                        <div class=\"quantity-selector\" id=\"quantity-selector\" style=\"display: none;\">\r\n");
      out.write("                            <button type=\"button\" class=\"quantity-btn\" onclick=\"decreaseQuantity()\">-</button>\r\n");
      out.write("                            <input type=\"number\" class=\"quantity-input\" id=\"quantity-input\" value=\"1\" min=\"1\">\r\n");
      out.write("                            <button type=\"button\" class=\"quantity-btn\" onclick=\"increaseQuantity()\">+</button>\r\n");
      out.write("                        </div>\r\n");
      out.write("\r\n");
      out.write("                        <!-- Action Buttons -->\r\n");
      out.write("                        <div class=\"product-actions\">\r\n");
      out.write("                            <button class=\"btn-add-to-cart\" id=\"add-to-cart-btn\" disabled>\r\n");
      out.write("                                <i class=\"fas fa-spinner fa-spin me-2\"></i>Đang tải...\r\n");
      out.write("                            </button>\r\n");
      out.write("                            <button class=\"btn-wishlist\" id=\"wishlist-btn\" style=\"display: none;\">\r\n");
      out.write("                                <i class=\"fas fa-heart me-2\"></i>Yêu thích\r\n");
      out.write("                            </button>\r\n");
      out.write("                        </div>\r\n");
      out.write("\r\n");
      out.write("                        <!-- Product Specifications Table -->\r\n");
      out.write("                        <div class=\"specifications-table\" id=\"specifications-container\" style=\"display: none;\">\r\n");
      out.write("                            <table class=\"table table-striped mb-0\">\r\n");
      out.write("                                <tbody id=\"specifications-table\">\r\n");
      out.write("                                    <!-- Specifications will be loaded dynamically -->\r\n");
      out.write("                                </tbody>\r\n");
      out.write("                            </table>\r\n");
      out.write("                        </div>\r\n");
      out.write("\r\n");
      out.write("                        <!-- Product Policies -->\r\n");
      out.write("                        <div class=\"product-policies\">\r\n");
      out.write("                            <div class=\"policy-item\">\r\n");
      out.write("                                <i class=\"fas fa-shipping-fast policy-icon\"></i>\r\n");
      out.write("                                <span class=\"policy-text\">Giao hàng toàn quốc, nhận hàng trong 2-3 ngày</span>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <div class=\"policy-item\">\r\n");
      out.write("                                <i class=\"fas fa-undo policy-icon\"></i>\r\n");
      out.write("                                <span class=\"policy-text\">Đổi trả miễn phí trong 7 ngày nếu có lỗi từ nhà sản xuất</span>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <div class=\"policy-item\">\r\n");
      out.write("                                <i class=\"fas fa-shield-alt policy-icon\"></i>\r\n");
      out.write("                                <span class=\"policy-text\">Bảo hành chính hãng theo quy định của Bandai</span>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <div class=\"policy-item\">\r\n");
      out.write("                                <i class=\"fas fa-phone policy-icon\"></i>\r\n");
      out.write("                                <span class=\"policy-text\">Hỗ trợ 24/7 qua hotline: 0385546145</span>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>        <!-- Product Tabs -->\r\n");
      out.write("        <div class=\"container\">\r\n");
      out.write("            <div class=\"product-tabs\" id=\"product-tabs\" style=\"display: none;\">\r\n");
      out.write("                <div class=\"row\">\r\n");
      out.write("                    <div class=\"col-lg-8\">\r\n");
      out.write("                        <ul class=\"nav nav-tabs\" id=\"productTabs\" role=\"tablist\">\r\n");
      out.write("                            <li class=\"nav-item\" role=\"presentation\">\r\n");
      out.write("                                <button class=\"nav-link active\" id=\"description-tab\" data-bs-toggle=\"tab\" \r\n");
      out.write("                                        data-bs-target=\"#description\" type=\"button\" role=\"tab\" \r\n");
      out.write("                                        aria-controls=\"description\" aria-selected=\"true\">\r\n");
      out.write("                                    <i class=\"fas fa-info-circle me-2\"></i>Mô tả chi tiết\r\n");
      out.write("                                </button>\r\n");
      out.write("                            </li>\r\n");
      out.write("                            <li class=\"nav-item\" role=\"presentation\">\r\n");
      out.write("                                <button class=\"nav-link\" id=\"specifications-tab\" data-bs-toggle=\"tab\" \r\n");
      out.write("                                        data-bs-target=\"#specifications\" type=\"button\" role=\"tab\" \r\n");
      out.write("                                        aria-controls=\"specifications\" aria-selected=\"false\">\r\n");
      out.write("                                    <i class=\"fas fa-list-ul me-2\"></i>Thông số kỹ thuật\r\n");
      out.write("                                </button>\r\n");
      out.write("                            </li>\r\n");
      out.write("                            <li class=\"nav-item\" role=\"presentation\">\r\n");
      out.write("                                <button class=\"nav-link\" id=\"reviews-tab\" data-bs-toggle=\"tab\" \r\n");
      out.write("                                        data-bs-target=\"#reviews\" type=\"button\" role=\"tab\" \r\n");
      out.write("                                        aria-controls=\"reviews\" aria-selected=\"false\">\r\n");
      out.write("                                    <i class=\"fas fa-star me-2\"></i>Đánh giá (0)\r\n");
      out.write("                                </button>\r\n");
      out.write("                            </li>\r\n");
      out.write("                        </ul>\r\n");
      out.write("                        \r\n");
      out.write("                        <div class=\"tab-content\" id=\"productTabContent\">\r\n");
      out.write("                            <!-- Description Tab -->\r\n");
      out.write("                            <div class=\"tab-pane fade show active\" id=\"description\" role=\"tabpanel\" \r\n");
      out.write("                                 aria-labelledby=\"description-tab\">\r\n");
      out.write("                                <div id=\"product-description-content\">\r\n");
      out.write("                                    <p class=\"text-muted\">Đang tải mô tả sản phẩm...</p>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            \r\n");
      out.write("                            <!-- Specifications Tab -->\r\n");
      out.write("                            <div class=\"tab-pane fade\" id=\"specifications\" role=\"tabpanel\" \r\n");
      out.write("                                 aria-labelledby=\"specifications-tab\">\r\n");
      out.write("                                <div class=\"specifications-table\">\r\n");
      out.write("                                    <table class=\"table table-striped\" id=\"specs-detail-table\">\r\n");
      out.write("                                        <tbody>\r\n");
      out.write("                                            <tr><td colspan=\"2\" class=\"text-muted text-center\">Đang tải thông số kỹ thuật...</td></tr>\r\n");
      out.write("                                        </tbody>\r\n");
      out.write("                                    </table>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            \r\n");
      out.write("                            <!-- Reviews Tab -->\r\n");
      out.write("                            <div class=\"tab-pane fade\" id=\"reviews\" role=\"tabpanel\" \r\n");
      out.write("                                 aria-labelledby=\"reviews-tab\">\r\n");
      out.write("                                <div class=\"reviews-section\">\r\n");
      out.write("                                    <div class=\"review-summary\">\r\n");
      out.write("                                        <div class=\"review-score\">\r\n");
      out.write("                                            <div class=\"score-number\">0.0</div>\r\n");
      out.write("                                            <div class=\"score-stars\">\r\n");
      out.write("                                                <i class=\"fas fa-star\"></i>\r\n");
      out.write("                                                <i class=\"fas fa-star\"></i>\r\n");
      out.write("                                                <i class=\"fas fa-star\"></i>\r\n");
      out.write("                                                <i class=\"fas fa-star\"></i>\r\n");
      out.write("                                                <i class=\"fas fa-star\"></i>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            <div class=\"score-text\">0 đánh giá</div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                        <div class=\"review-actions\">\r\n");
      out.write("                                            <button class=\"btn btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#reviewModal\">\r\n");
      out.write("                                                <i class=\"fas fa-plus me-2\"></i>Viết đánh giá\r\n");
      out.write("                                            </button>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                    \r\n");
      out.write("                                    <div class=\"reviews-list\" id=\"reviews-list\">\r\n");
      out.write("                                        <div class=\"text-center text-muted py-4\">\r\n");
      out.write("                                            <i class=\"fas fa-comments fa-3x mb-3\"></i>\r\n");
      out.write("                                            <p>Chưa có đánh giá nào cho sản phẩm này.</p>\r\n");
      out.write("                                            <p>Hãy là người đầu tiên đánh giá sản phẩm!</p>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    \r\n");
      out.write("                    <!-- Related Products Sidebar -->\r\n");
      out.write("                    <div class=\"col-lg-4\">\r\n");
      out.write("                        <div class=\"related-products\">\r\n");
      out.write("                            <h5 class=\"section-title mb-3\">\r\n");
      out.write("                                <i class=\"fas fa-layer-group title-icon\"></i>\r\n");
      out.write("                                Sản phẩm liên quan\r\n");
      out.write("                            </h5>\r\n");
      out.write("                            <div id=\"related-products-container\">\r\n");
      out.write("                                <div class=\"text-center py-4\">\r\n");
      out.write("                                    <div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\">\r\n");
      out.write("                                        <span class=\"visually-hidden\">Đang tải...</span>\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                    <p class=\"text-muted mt-2 small\">Đang tải sản phẩm liên quan...</p>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("    </main>\r\n");
      out.write("\r\n");
      out.write("    <!-- Review Modal -->\r\n");
      out.write("    <div class=\"modal fade\" id=\"reviewModal\" tabindex=\"-1\" aria-labelledby=\"reviewModalLabel\" aria-hidden=\"true\">\r\n");
      out.write("        <div class=\"modal-dialog\">\r\n");
      out.write("            <div class=\"modal-content\">\r\n");
      out.write("                <div class=\"modal-header\">\r\n");
      out.write("                    <h5 class=\"modal-title\" id=\"reviewModalLabel\">Viết đánh giá sản phẩm</h5>\r\n");
      out.write("                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"modal-body\">\r\n");
      out.write("                    <form class=\"review-form\" id=\"reviewForm\">\r\n");
      out.write("                        <div class=\"mb-3\">\r\n");
      out.write("                            <label class=\"form-label\">Đánh giá của bạn</label>\r\n");
      out.write("                            <div class=\"star-rating\" id=\"starRating\">\r\n");
      out.write("                                <span class=\"star\" data-rating=\"1\">★</span>\r\n");
      out.write("                                <span class=\"star\" data-rating=\"2\">★</span>\r\n");
      out.write("                                <span class=\"star\" data-rating=\"3\">★</span>\r\n");
      out.write("                                <span class=\"star\" data-rating=\"4\">★</span>\r\n");
      out.write("                                <span class=\"star\" data-rating=\"5\">★</span>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <input type=\"hidden\" id=\"rating\" name=\"rating\" value=\"5\">\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"mb-3\">\r\n");
      out.write("                            <label for=\"reviewTitle\" class=\"form-label\">Tiêu đề đánh giá</label>\r\n");
      out.write("                            <input type=\"text\" class=\"form-control\" id=\"reviewTitle\" name=\"reviewTitle\" \r\n");
      out.write("                                   placeholder=\"Tóm tắt đánh giá của bạn...\" required>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"mb-3\">\r\n");
      out.write("                            <label for=\"reviewComment\" class=\"form-label\">Nội dung đánh giá</label>\r\n");
      out.write("                            <textarea class=\"form-control\" id=\"reviewComment\" name=\"reviewComment\" rows=\"4\" \r\n");
      out.write("                                      placeholder=\"Chia sẻ trải nghiệm của bạn về sản phẩm này...\" required></textarea>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"mb-3\">\r\n");
      out.write("                            <label for=\"reviewerName\" class=\"form-label\">Tên của bạn</label>\r\n");
      out.write("                            <input type=\"text\" class=\"form-control\" id=\"reviewerName\" name=\"reviewerName\" \r\n");
      out.write("                                   placeholder=\"Nhập tên hiển thị...\" required>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </form>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"modal-footer\">\r\n");
      out.write("                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Hủy</button>\r\n");
      out.write("                    <button type=\"button\" class=\"btn btn-primary\" onclick=\"submitReview()\">\r\n");
      out.write("                        <i class=\"fas fa-paper-plane me-2\"></i>Gửi đánh giá\r\n");
      out.write("                    </button>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("    </div>\r\n");
      out.write("    <footer class=\"bg-dark text-white\">\r\n");
      out.write("        <div class=\"footer-top py-5\">\r\n");
      out.write("            <div class=\"container\">\r\n");
      out.write("                <div class=\"row\">\r\n");
      out.write("                    <div class=\"col-lg-4 col-md-6 mb-4\">\r\n");
      out.write("                        <div class=\"footer-section\">\r\n");
      out.write("                            <h5 class=\"footer-title\">43 Gundam Hobby</h5>\r\n");
      out.write("                            <p class=\"footer-desc\">Chuyên cung cấp mô hình Gundam chính hãng với giá tốt nhất. Uy tín - Chất lượng - Dịch vụ tận tâm.</p>\r\n");
      out.write("                            <div class=\"store-info\">\r\n");
      out.write("                                <div class=\"info-item mb-2\">\r\n");
      out.write("                                    <i class=\"fas fa-map-marker-alt me-2\"></i>\r\n");
      out.write("                                    <span>59 Lê Đình Diên, Cẩm Lệ, Đà Nẵng</span>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <div class=\"info-item mb-2\">\r\n");
      out.write("                                    <i class=\"fas fa-phone me-2\"></i>\r\n");
      out.write("                                    <a href=\"tel:0385546145\" class=\"text-white\">0385546145 (8h-20h)</a>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <div class=\"info-item\">\r\n");
      out.write("                                    <i class=\"fas fa-envelope me-2\"></i>\r\n");
      out.write("                                    <a href=\"mailto:43gundamhobby@gmail.com\" class=\"text-white\">43gundamhobby@gmail.com</a>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"col-lg-2 col-md-6 mb-4\">\r\n");
      out.write("                        <div class=\"footer-section\">\r\n");
      out.write("                            <h6 class=\"footer-title\">Sản phẩm</h6>\r\n");
      out.write("                            <ul class=\"footer-links\">\r\n");
      out.write("                                <li><a href=\"#\">Gundam Bandai</a></li>\r\n");
      out.write("                                <li><a href=\"#\">High Grade (HG)</a></li>\r\n");
      out.write("                                <li><a href=\"#\">Master Grade (MG)</a></li>\r\n");
      out.write("                                <li><a href=\"#\">Real Grade (RG)</a></li>\r\n");
      out.write("                                <li><a href=\"#\">Perfect Grade (PG)</a></li>\r\n");
      out.write("                                <li><a href=\"#\">Metal Build</a></li>\r\n");
      out.write("                            </ul>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"col-lg-2 col-md-6 mb-4\">\r\n");
      out.write("                        <div class=\"footer-section\">\r\n");
      out.write("                            <h6 class=\"footer-title\">Dịch vụ</h6>\r\n");
      out.write("                            <ul class=\"footer-links\">\r\n");
      out.write("                                <li><a href=\"#\">Hàng Pre-Order</a></li>\r\n");
      out.write("                                <li><a href=\"#\">Dụng cụ & Phụ kiện</a></li>\r\n");
      out.write("                                <li><a href=\"#\">Hướng dẫn lắp ráp</a></li>\r\n");
      out.write("                                <li><a href=\"#\">Sơn & Trang trí</a></li>\r\n");
      out.write("                                <li><a href=\"#\">Bảo hành sản phẩm</a></li>\r\n");
      out.write("                            </ul>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"col-lg-2 col-md-6 mb-4\">\r\n");
      out.write("                        <div class=\"footer-section\">\r\n");
      out.write("                            <h6 class=\"footer-title\">Chính sách</h6>\r\n");
      out.write("                            <ul class=\"footer-links\">\r\n");
      out.write("                                <li><a href=\"#\">Chính sách bảo mật</a></li>\r\n");
      out.write("                                <li><a href=\"#\">Chính sách thanh toán</a></li>\r\n");
      out.write("                                <li><a href=\"#\">Chính sách vận chuyển</a></li>\r\n");
      out.write("                                <li><a href=\"#\">Chính sách đổi trả</a></li>\r\n");
      out.write("                                <li><a href=\"#\">Quy định sử dụng</a></li>\r\n");
      out.write("                            </ul>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"col-lg-2 col-md-6 mb-4\">\r\n");
      out.write("                        <div class=\"footer-section\">\r\n");
      out.write("                            <h6 class=\"footer-title\">Hỗ trợ</h6>\r\n");
      out.write("                            <ul class=\"footer-links\">\r\n");
      out.write("                                <li><a href=\"#\">Liên hệ</a></li>\r\n");
      out.write("                                <li><a href=\"#\">FAQ</a></li>\r\n");
      out.write("                                <li><a href=\"#\">Hướng dẫn đặt hàng</a></li>\r\n");
      out.write("                                <li><a href=\"#\">Tra cứu đơn hàng</a></li>\r\n");
      out.write("                                <li><a href=\"#\">Hỗ trợ kỹ thuật</a></li>\r\n");
      out.write("                            </ul>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("        <div class=\"footer-social py-4 bg-darker\">\r\n");
      out.write("            <div class=\"container\">\r\n");
      out.write("                <div class=\"row align-items-center\">\r\n");
      out.write("                    <div class=\"col-md-6\">\r\n");
      out.write("                        <h6 class=\"social-title mb-3\">Theo dõi chúng tôi</h6>\r\n");
      out.write("                        <div class=\"social-links\">\r\n");
      out.write("                            <a href=\"#\" class=\"social-link facebook\">\r\n");
      out.write("                                <i class=\"fab fa-facebook-f\"></i>\r\n");
      out.write("                                <span>Facebook</span>\r\n");
      out.write("                            </a>\r\n");
      out.write("                            <a href=\"#\" class=\"social-link youtube\">\r\n");
      out.write("                                <i class=\"fab fa-youtube\"></i>\r\n");
      out.write("                                <span>Youtube</span>\r\n");
      out.write("                            </a>\r\n");
      out.write("                            <a href=\"#\" class=\"social-link tiktok\">\r\n");
      out.write("                                <i class=\"fab fa-tiktok\"></i>\r\n");
      out.write("                                <span>TikTok</span>\r\n");
      out.write("                            </a>\r\n");
      out.write("                            <a href=\"#\" class=\"social-link instagram\">\r\n");
      out.write("                                <i class=\"fab fa-instagram\"></i>\r\n");
      out.write("                                <span>Instagram</span>\r\n");
      out.write("                            </a>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"col-md-6\">\r\n");
      out.write("                        <div class=\"newsletter\">\r\n");
      out.write("                            <h6 class=\"newsletter-title mb-3\">Đăng ký nhận tin</h6>\r\n");
      out.write("                            <form class=\"newsletter-form\">\r\n");
      out.write("                                <div class=\"input-group\">\r\n");
      out.write("                                    <input type=\"email\" class=\"form-control\" placeholder=\"Nhập email của bạn...\">\r\n");
      out.write("                                    <button class=\"btn btn-primary\" type=\"submit\">\r\n");
      out.write("                                        <i class=\"fas fa-paper-plane\"></i>\r\n");
      out.write("                                    </button>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </form>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("        <div class=\"footer-bottom py-3 bg-darker border-top border-secondary\">\r\n");
      out.write("            <div class=\"container\">\r\n");
      out.write("                <div class=\"row align-items-center\">\r\n");
      out.write("                    <div class=\"col-md-6\">\r\n");
      out.write("                        <p class=\"copyright mb-0\">&copy; 2025 43 Gundam Hobby. All rights reserved.</p>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"col-md-6 text-md-end\">\r\n");
      out.write("                        <div class=\"payment-methods\">\r\n");
      out.write("                            <img src=\"https://via.placeholder.com/40x25/cccccc/666666?text=VISA\" alt=\"Visa\" class=\"payment-icon\">\r\n");
      out.write("                            <img src=\"https://via.placeholder.com/40x25/cccccc/666666?text=MC\" alt=\"Mastercard\" class=\"payment-icon\">\r\n");
      out.write("                            <img src=\"https://via.placeholder.com/40x25/cccccc/666666?text=COD\" alt=\"COD\" class=\"payment-icon\">\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("    </footer>\r\n");
      out.write("    <!-- Back to Top Button -->\r\n");
      out.write("    <button class=\"back-to-top\" id=\"backToTop\">\r\n");
      out.write("        <i class=\"fas fa-chevron-up\"></i>\r\n");
      out.write("    </button>\r\n");
      out.write("\r\n");
      out.write("    <!-- Product Detail Dynamic Manager -->\r\n");
      out.write("    <script src=\"");
      out.print(request.getContextPath());
      out.write("/js/product-detail-manager.js\"></script>\r\n");
      out.write("    \r\n");
      out.write("    <!-- Additional JavaScript for enhanced functionality -->\r\n");
      out.write("    <script>\r\n");
      out.write("        // Hiện/ẩn popup danh mục sản phẩm\r\n");
      out.write("        document.addEventListener('DOMContentLoaded', function() {\r\n");
      out.write("            var btn = document.getElementById('categoryBtn');\r\n");
      out.write("            var popup = document.getElementById('categoryPopup');\r\n");
      out.write("            if (btn && popup) {\r\n");
      out.write("                btn.addEventListener('mouseenter', function() {\r\n");
      out.write("                    popup.classList.add('show');\r\n");
      out.write("                });\r\n");
      out.write("                btn.addEventListener('mouseleave', function() {\r\n");
      out.write("                    setTimeout(function(){\r\n");
      out.write("                        if (!popup.matches(':hover')) popup.classList.remove('show');\r\n");
      out.write("                    }, 100);\r\n");
      out.write("                });\r\n");
      out.write("                popup.addEventListener('mouseenter', function() {\r\n");
      out.write("                    popup.classList.add('show');\r\n");
      out.write("                });\r\n");
      out.write("                popup.addEventListener('mouseleave', function() {\r\n");
      out.write("                    popup.classList.remove('show');\r\n");
      out.write("                });\r\n");
      out.write("                // Mobile: click để toggle\r\n");
      out.write("                btn.addEventListener('click', function(e) {\r\n");
      out.write("                    if (window.innerWidth < 992) {\r\n");
      out.write("                        popup.classList.toggle('show');\r\n");
      out.write("                    }\r\n");
      out.write("                });\r\n");
      out.write("                // Click ngoài để ẩn\r\n");
      out.write("                document.addEventListener('click', function(e) {\r\n");
      out.write("                    if (!btn.contains(e.target) && !popup.contains(e.target)) {\r\n");
      out.write("                        popup.classList.remove('show');\r\n");
      out.write("                    }\r\n");
      out.write("                });\r\n");
      out.write("            }\r\n");
      out.write("            \r\n");
      out.write("            // Show content when product is loaded\r\n");
      out.write("            setTimeout(function() {\r\n");
      out.write("                const loadingElement = document.getElementById('product-loading');\r\n");
      out.write("                const breadcrumbNav = document.getElementById('breadcrumb-nav');\r\n");
      out.write("                const productContent = document.getElementById('product-content');\r\n");
      out.write("                const productTabs = document.getElementById('product-tabs');\r\n");
      out.write("                \r\n");
      out.write("                if (window.productDetailManager && window.productDetailManager.product) {\r\n");
      out.write("                    // Product loaded successfully\r\n");
      out.write("                    if (loadingElement) loadingElement.style.display = 'none';\r\n");
      out.write("                    if (breadcrumbNav) breadcrumbNav.style.display = 'block';\r\n");
      out.write("                    if (productContent) productContent.style.display = 'block';\r\n");
      out.write("                    if (productTabs) productTabs.style.display = 'block';\r\n");
      out.write("                } else {\r\n");
      out.write("                    // Show static content after delay if dynamic loading fails\r\n");
      out.write("                    setTimeout(function() {\r\n");
      out.write("                        if (loadingElement) loadingElement.style.display = 'none';\r\n");
      out.write("                        if (breadcrumbNav) breadcrumbNav.style.display = 'block';\r\n");
      out.write("                        if (productContent) productContent.style.display = 'block';\r\n");
      out.write("                        if (productTabs) productTabs.style.display = 'block';\r\n");
      out.write("                    }, 3000);\r\n");
      out.write("                }\r\n");
      out.write("            }, 1000);\r\n");
      out.write("            \r\n");
      out.write("            // Back to top functionality\r\n");
      out.write("            const backToTopBtn = document.getElementById('backToTop');\r\n");
      out.write("            if (backToTopBtn) {\r\n");
      out.write("                window.addEventListener('scroll', () => {\r\n");
      out.write("                    if (window.pageYOffset > 300) {\r\n");
      out.write("                        backToTopBtn.classList.add('show');\r\n");
      out.write("                    } else {\r\n");
      out.write("                        backToTopBtn.classList.remove('show');\r\n");
      out.write("                    }\r\n");
      out.write("                });\r\n");
      out.write("                \r\n");
      out.write("                backToTopBtn.addEventListener('click', () => {\r\n");
      out.write("                    window.scrollTo({\r\n");
      out.write("                        top: 0,\r\n");
      out.write("                        behavior: 'smooth'\r\n");
      out.write("                    });\r\n");
      out.write("                });\r\n");
      out.write("            }\r\n");
      out.write("        });\r\n");
      out.write("        \r\n");
      out.write("        // Quantity controls\r\n");
      out.write("        window.decreaseQuantity = function() {\r\n");
      out.write("            const input = document.getElementById('quantity-input');\r\n");
      out.write("            const current = parseInt(input.value);\r\n");
      out.write("            if (current > 1) {\r\n");
      out.write("                input.value = current - 1;\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        window.increaseQuantity = function() {\r\n");
      out.write("            const input = document.getElementById('quantity-input');\r\n");
      out.write("            const current = parseInt(input.value);\r\n");
      out.write("            const max = parseInt(input.getAttribute('max')) || 999;\r\n");
      out.write("            if (current < max) {\r\n");
      out.write("                input.value = current + 1;\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        // Star rating functionality\r\n");
      out.write("        function initStarRating() {\r\n");
      out.write("            const stars = document.querySelectorAll('.star-rating .star');\r\n");
      out.write("            const ratingInput = document.getElementById('rating');\r\n");
      out.write("            \r\n");
      out.write("            stars.forEach(star => {\r\n");
      out.write("                star.addEventListener('click', function() {\r\n");
      out.write("                    const rating = this.getAttribute('data-rating');\r\n");
      out.write("                    ratingInput.value = rating;\r\n");
      out.write("                    \r\n");
      out.write("                    // Update star display\r\n");
      out.write("                    stars.forEach((s, index) => {\r\n");
      out.write("                        if (index < rating) {\r\n");
      out.write("                            s.classList.add('active');\r\n");
      out.write("                        } else {\r\n");
      out.write("                            s.classList.remove('active');\r\n");
      out.write("                        }\r\n");
      out.write("                    });\r\n");
      out.write("                });\r\n");
      out.write("                \r\n");
      out.write("                star.addEventListener('mouseover', function() {\r\n");
      out.write("                    const rating = this.getAttribute('data-rating');\r\n");
      out.write("                    stars.forEach((s, index) => {\r\n");
      out.write("                        if (index < rating) {\r\n");
      out.write("                            s.style.color = 'var(--warning-color)';\r\n");
      out.write("                        } else {\r\n");
      out.write("                            s.style.color = 'var(--border-color)';\r\n");
      out.write("                        }\r\n");
      out.write("                    });\r\n");
      out.write("                });\r\n");
      out.write("            });\r\n");
      out.write("            \r\n");
      out.write("            const starRating = document.querySelector('.star-rating');\r\n");
      out.write("            if (starRating) {\r\n");
      out.write("                starRating.addEventListener('mouseleave', function() {\r\n");
      out.write("                    const currentRating = ratingInput.value;\r\n");
      out.write("                    stars.forEach((s, index) => {\r\n");
      out.write("                        if (index < currentRating) {\r\n");
      out.write("                            s.style.color = 'var(--warning-color)';\r\n");
      out.write("                        } else {\r\n");
      out.write("                            s.style.color = 'var(--border-color)';\r\n");
      out.write("                        }\r\n");
      out.write("                    });\r\n");
      out.write("                });\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        // Submit review\r\n");
      out.write("        window.submitReview = function() {\r\n");
      out.write("            const form = document.getElementById('reviewForm');\r\n");
      out.write("            const formData = new FormData(form);\r\n");
      out.write("            \r\n");
      out.write("            // Basic validation\r\n");
      out.write("            if (!formData.get('reviewTitle') || !formData.get('reviewComment') || !formData.get('reviewerName')) {\r\n");
      out.write("                alert('Vui lòng điền đầy đủ thông tin đánh giá!');\r\n");
      out.write("                return;\r\n");
      out.write("            }\r\n");
      out.write("            \r\n");
      out.write("            // Here you would normally send the review to your backend\r\n");
      out.write("            console.log('Review submitted:', Object.fromEntries(formData));\r\n");
      out.write("            \r\n");
      out.write("            // Close modal and show success message\r\n");
      out.write("            const modal = bootstrap.Modal.getInstance(document.getElementById('reviewModal'));\r\n");
      out.write("            if (modal) modal.hide();\r\n");
      out.write("            \r\n");
      out.write("            alert('Cảm ơn bạn đã đánh giá! Đánh giá của bạn sẽ được duyệt và hiển thị sớm.');\r\n");
      out.write("            \r\n");
      out.write("            // Reset form\r\n");
      out.write("            form.reset();\r\n");
      out.write("            document.getElementById('rating').value = '5';\r\n");
      out.write("            initStarRating();\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        // Image gallery functionality\r\n");
      out.write("        window.initImageGallery = function() {\r\n");
      out.write("            const thumbnails = document.querySelectorAll('.thumbnail-image');\r\n");
      out.write("            const mainImage = document.getElementById('main-product-image');\r\n");
      out.write("            \r\n");
      out.write("            thumbnails.forEach(thumb => {\r\n");
      out.write("                thumb.addEventListener('click', function() {\r\n");
      out.write("                    // Remove active class from all thumbnails\r\n");
      out.write("                    thumbnails.forEach(t => t.classList.remove('active'));\r\n");
      out.write("                    \r\n");
      out.write("                    // Add active class to clicked thumbnail\r\n");
      out.write("                    this.classList.add('active');\r\n");
      out.write("                    \r\n");
      out.write("                    // Update main image\r\n");
      out.write("                    mainImage.src = this.src;\r\n");
      out.write("                    mainImage.alt = this.alt;\r\n");
      out.write("                });\r\n");
      out.write("            });\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        // Enhanced initialization\r\n");
      out.write("        document.addEventListener('DOMContentLoaded', function() {\r\n");
      out.write("            // Initialize star rating if exists\r\n");
      out.write("            if (document.querySelector('.star-rating')) {\r\n");
      out.write("                initStarRating();\r\n");
      out.write("            }\r\n");
      out.write("        });\r\n");
      out.write("    </script>\r\n");
      out.write("</body>\r\n");
      out.write("</html>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof jakarta.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
